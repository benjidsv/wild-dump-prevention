{% extends "base.html" %}
{% block title %}Dashboard{% endblock %}
{% block content %}

<h2>ðŸ“Š Statistiques de tri</h2>

<form method="GET" class="row g-3 mb-4">
  <div class="col-md-4">
    <label for="start_date" class="form-label">Date de dÃ©but</label>
    <input type="date" id="start_date" name="start_date" class="form-control" value="{{ request.args.get('start_date', '') }}">
  </div>
  <div class="col-md-4">
    <label for="end_date" class="form-label">Date de fin</label>
    <input type="date" id="end_date" name="end_date" class="form-control" value="{{ request.args.get('end_date', '') }}">
  </div>
  <div class="col-md-4 align-self-end">
    <button type="submit" class="btn btn-primary">Filtrer</button>
  </div>
</form>

<canvas id="pieChart" width="300" height="300"></canvas>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
const data = {
    labels: ['Pleine', 'Vide'],
    datasets: [{
        data: [{{ stats.full }}, {{ stats.empty }}],
        backgroundColor: ['#dc3545', '#198754']
    }]
};

const config = {
    type: 'pie',
    data: data,
    options: {
        responsive: true,
        plugins: {
            legend: {
                position: 'bottom'
            },
            title: {
                display: true,
                text: 'RÃ©partition des annotations'
            }
        }
    }
};

const pieChart = new Chart(
    document.getElementById('pieChart'),
    config
);
</script>

{% endblock %}
